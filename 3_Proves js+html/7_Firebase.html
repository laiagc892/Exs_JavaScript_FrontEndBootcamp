<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7_Firebase</title>
    <style>
        body{
            width: 1024px;
            margin: 2em auto;
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        }
        h1{
            text-align: center;
        }
        h3{
            margin: 1em 0 0 0;
        }
        p{
            margin: 0 0 1em 0;
        }
    </style>
</head>
<body>
    <h2>Alumnes tope guais:</h2>
    <ul id="stu"></ul>
    
    <h2>Llista de la compra de l'Omar:</h2>
    <ul id="pro"></ul>
    
    <script>
        var urlAlumnes = "https://singulars-2020-default-rtdb.firebaseio.com/alumnes.json";     // Alumnes
        var students = document.querySelector("#stu");

        function alumnesGuais(url) {
            fetch(url)
            .then(res => res.json())
            .then (res => {
                var alumnes = res;
                console.log(alumnes);
                for (propietat in alumnes) {
                stu.innerHTML += `<li>${propietat} --> té ${alumnes[propietat].edat} anys i viu a ${alumnes[propietat].ubicacio}.</li>`;
            }
            })
        }

        alumnesGuais(urlAlumnes);


        var urlProductes = "https://singulars-2020-default-rtdb.firebaseio.com/llista-compra.json";     // Llista compra
        var products = document.querySelector("#pro");

        function comprar(url) {
            fetch(url)
            .then(res => res.json())
            .then (res => {
                var productes = res;
                console.log(productes);
                for (propietat in productes) {
                products.innerHTML += `<li>${productes[propietat]}.</li>`;
            }
            })
        }

        comprar(urlProductes);


        const database = "https://singulars-2020-default-rtdb.firebaseio.com/";
        fetch(database + "missatges.json", {    method: 'POST',
                                                headers: {
                                                            "Content-Type": "application/json",
                                                        },
                                                body: JSON.stringify(acadèmia = {nom: "Bit", logística: "caus"})
        })
        .then(res => res.json())
        .then(res => console.log(res));

    </script>
</body>
</html>